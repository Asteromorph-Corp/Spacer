Aggregation pheromone, 4-vinylanisole (4VA), is specifically released by gregarious migratory locusts, and is crucial in forming locust swarms that cause destructive plagues1. Control of locust plagues relies heavily on the extensive application of chemical pesticides, which has led to severe environmental and health issues2. As pheromones are primary mediators of insect communication and behaviour3, exploring their biosynthesis can provide important cues to develop innovative behavioural regulators, potentially reducing the reliance on chemical pesticides. Here we resolve the biosynthesis of 4VA and behavioural responses of locusts when enzymes in the 4VA biosynthetic pathway are manipulated. The process initiates with phenylalanine derived from food plants and proceeds through three precursors: cinnamic acid, p-hydroxycinnamic acid and 4-vinylphenol (4VP). Notably, the conversion from 4VP to 4VA through methylation is unique to gregarious locusts. This step is catalysed by two crucial methyltransferases, 4VPMT1 and 4VPMT2. Guided by the X-ray co-crystal structure of 4VPMT2 bound with 4VP and S-adenosyl-L-methionine, we developed 4-nitrophenol as a substrate surrogate. We identified several chemicals that can block 4VA production by inhibiting the enzymatic activities of 4VPMT proteins, thereby suppressing locust aggregative behaviour. The findings uncover the chemical logic behind 4VA biosynthesis and pinpoint two crucial enzymes as novel targets for locust swarm management.