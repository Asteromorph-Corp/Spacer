The efficacy of chimeric antigen receptor (CAR) T cell therapy in solid tumours is limited by immunosuppression and antigen heterogeneity1-3. To overcome these barriers, 'armoured' CAR T cells, which secrete proinflammatory cytokines, have been developed4. However, their clinical application has been limited because of toxicity related to peripheral expression of the armouring transgene5. Here, we have developed a CRISPR knock-in strategy that leverages the regulatory mechanisms of endogenous genes to drive transgene expression in a tumour-localized manner. By screening endogenous genes with tumour-restricted expression, we have identified the NR4A2 and RGS16 promoters as promising candidates to support the delivery of cytokines such as IL-12 and IL-2 directly to the tumour site, leading to enhanced antitumour efficacy and long-term survival of mice in both syngeneic and xenogeneic models. This effect was concomitant with improved CAR T cell polyfunctionality, activation of endogenous antitumour immunity and a favourable safety profile, and was applicable in CAR T cells from patients.